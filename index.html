<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn Spanish from German with adaptive exercises and offline support">
    <meta name="theme-color" content="#20B2AA">
    <meta name="color-scheme" content="light">
    <title>Spanish Learning App</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="icons/icon-152x152.png">

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Skip to main content for keyboard navigation -->
    <a href="#main-content" class="skip-to-main" style="position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden;">Zum Hauptinhalt springen</a>

    <!-- Sidebar Toggle -->
    <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Seitenleiste ein-/ausblenden" aria-expanded="true" aria-controls="sidebar">‚úï</button>

    <div id="app">
        <!-- Sidebar -->
        <aside id="sidebar" role="complementary" aria-label="√úbungsnavigation">
            <div class="sidebar-header">√úbungen</div>
            <nav id="exercise-nav" role="navigation" aria-label="√úbungsliste"></nav>
        </aside>

        <!-- Main Content -->
        <main id="main-content" role="main">
            <!-- Progress Bar -->
            <div id="progress" role="region" aria-label="Lernfortschritt">
                <span class="progress-text" id="progress-label">Laden...</span>
                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-labelledby="progress-label">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <!-- Exercise Area -->
            <div id="exercise-area" role="region" aria-live="polite" aria-atomic="true" aria-label="√úbungsbereich">
                <p>L√§dt √úbungen...</p>
            </div>

            <!-- Actions -->
            <div id="actions" role="toolbar" aria-label="√úbungsaktionen">
                <button id="prev-btn" aria-label="Zur vorherigen √úbung" style="display:none;">‚Üê Zur√ºck</button>
                <button id="settings-btn" aria-label="Einstellungen √∂ffnen">‚öôÔ∏è</button>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="hidden" role="dialog" aria-modal="true" aria-labelledby="settings-title">
        <div class="modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
            <h2 id="settings-title">‚öôÔ∏è Einstellungen</h2>

            <!-- Learning Settings -->
            <fieldset style="margin-bottom: 30px; border: none; padding: 0;">
                <legend style="margin-bottom: 15px; font-size: 16px; color: var(--primary); font-weight: bold;">Lernhilfe</legend>
                <p style="margin-bottom: 15px; color: var(--text-muted); font-size: 14px;" id="help-description">
                    W√§hle, wie viele Hinweise du erhalten m√∂chtest:
                </p>

                <div role="radiogroup" aria-labelledby="help-description">
                    <label>
                        <input type="radio" name="help" value="keine" aria-describedby="help-keine-desc">
                        <strong>Keine Hilfe</strong><br>
                        <small id="help-keine-desc">Du erh√§ltst keine Hinweise. Ideal f√ºr Fortgeschrittene.</small>
                    </label>

                    <label>
                        <input type="radio" name="help" value="normal" checked aria-describedby="help-normal-desc">
                        <strong>Normal</strong><br>
                        <small id="help-normal-desc">Hinweise erscheinen nach 3 Fehlversuchen. Empfohlen.</small>
                    </label>

                    <label>
                        <input type="radio" name="help" value="viel" aria-describedby="help-viel-desc">
                        <strong>Viel Hilfe</strong><br>
                        <small id="help-viel-desc">Hinweise erscheinen nach dem 1. Fehlversuch. Ideal f√ºr Anf√§nger.</small>
                    </label>
                </div>
            </fieldset>

            <!-- Learning Mode -->
            <fieldset style="margin-bottom: 30px; border: none; padding: 0;">
                <legend style="margin-bottom: 15px; font-size: 16px; color: var(--primary); font-weight: bold;">Lernmodus</legend>
                <p style="margin-bottom: 15px; color: var(--text-muted); font-size: 14px;" id="mode-description">
                    W√§hle, wie √úbungen ausgew√§hlt werden:
                </p>

                <div role="radiogroup" aria-labelledby="mode-description">
                    <label>
                        <input type="radio" name="learningMode" value="linear" checked aria-describedby="mode-linear-desc">
                        <strong>Linear</strong><br>
                        <small id="mode-linear-desc">√úbungen werden in fester Reihenfolge pr√§sentiert. Empfohlen f√ºr Anf√§nger.</small>
                    </label>

                    <label>
                        <input type="radio" name="learningMode" value="adaptive" aria-describedby="mode-adaptive-desc">
                        <strong>Adaptiv (Experimentell)</strong><br>
                        <small id="mode-adaptive-desc">KI w√§hlt √úbungen basierend auf deiner Performance aus. Fokus auf schwache Bereiche, Spaced Repetition, intelligente Schwierigkeitsanpassung.</small>
                    </label>
                </div>
            </fieldset>

            <!-- Data Management -->
            <section style="margin-bottom: 30px; padding-top: 20px; border-top: 2px solid var(--border);" aria-labelledby="data-management-title">
                <h3 id="data-management-title" style="margin-bottom: 15px; font-size: 16px; color: var(--primary);">Datenmanagement</h3>

                <button onclick="window.DataBackup?.exportBackup()"
                        aria-label="Lernfortschritt als JSON-Datei exportieren"
                        style="width: 100%; margin-bottom: 10px; background: var(--primary); color: white;">
                    üì• Daten exportieren
                </button>

                <button onclick="document.getElementById('import-file-input').click()"
                        aria-label="Lernfortschritt aus JSON-Datei importieren"
                        style="width: 100%; margin-bottom: 10px; background: var(--bg); border: 2px solid var(--border); color: var(--text);">
                    üì§ Daten importieren
                </button>
                <input type="file" id="import-file-input" accept=".json" style="display: none;"
                       aria-label="JSON-Datei f√ºr Import ausw√§hlen"
                       onchange="window.DataBackup?.importBackup(event)">

                <button onclick="if(confirm('Alle Daten l√∂schen?')) window.DataBackup?.clearAllData()"
                        aria-label="Alle Lerndaten unwiderruflich l√∂schen"
                        style="width: 100%; background: var(--error); color: white;">
                    üóëÔ∏è Alle Daten l√∂schen
                </button>
            </section>

            <!-- GDPR & Privacy -->
            <section style="margin-bottom: 20px; padding-top: 20px; border-top: 2px solid var(--border);" aria-labelledby="gdpr-title">
                <h3 id="gdpr-title" style="margin-bottom: 15px; font-size: 16px; color: var(--primary);">Datenschutz (DSGVO)</h3>

                <button onclick="window.GDPR?.exerciseRightToAccess()"
                        aria-label="Gespeicherte pers√∂nliche Daten anzeigen"
                        style="width: 100%; margin-bottom: 10px; background: var(--bg); border: 2px solid var(--border); color: var(--text);">
                    üìã Meine Daten anzeigen (Auskunftsrecht)
                </button>

                <button onclick="window.open('privacy-policy.html', '_blank')"
                        aria-label="Datenschutzerkl√§rung in neuem Fenster √∂ffnen"
                        style="width: 100%; margin-bottom: 10px; background: var(--bg); border: 2px solid var(--border); color: var(--text);">
                    üîí Datenschutzerkl√§rung
                </button>

                <button onclick="window.GDPR?.exerciseRightToDeletion()"
                        aria-label="Alle pers√∂nlichen Daten gem√§√ü DSGVO-L√∂schungsrecht entfernen"
                        style="width: 100%; background: var(--bg); border: 2px solid var(--border); color: var(--text);">
                    ‚ùå Alle Daten l√∂schen (L√∂schungsrecht)
                </button>
            </section>

            <!-- App Info -->
            <section style="margin-bottom: 20px; padding-top: 20px; border-top: 2px solid var(--border);" aria-label="Applikationsinformationen">
                <p style="font-size: 12px; color: var(--text-muted); text-align: center;">
                    Version: <span id="app-version" aria-label="Aktuelle Version">1.0.0</span><br>
                    Umgebung: <span id="app-env" aria-label="Laufzeitumgebung">production</span>
                </p>
            </section>

            <div class="modal-actions" role="group" aria-label="Modal-Aktionen">
                <button id="close-settings" aria-label="Einstellungen schlie√üen ohne Speichern" style="background: var(--bg-secondary); color: var(--text);">
                    Schlie√üen
                </button>
                <button id="save-settings" class="btn-primary" aria-label="Einstellungen speichern und schlie√üen" style="margin: 0;">
                    Speichern
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Load data modules first (they use window.X pattern) -->
    <script src="/js/module-structure.js"></script>
    <script src="/js/lesson1-expanded.js"></script>

    <!-- Expanded Vocabulary Cards with Practices -->
    <script src="/js/unit2-vocabulary-expanded.js"></script>
    <script src="/js/unit3-vocabulary-expanded.js"></script>
    <script src="/js/unit4-vocabulary-expanded.js"></script>
    <script src="/js/unit5-vocabulary-expanded.js"></script>
    <script src="/js/unit6-vocabulary-expanded.js"></script>

    <!-- Main ES6 module -->
    <script type="module" src="/js/main.js"></script>
</body>
</html>
