<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Spanisch-Lern-App [DEBUG]</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.webmanifest">
    <meta name="theme-color" content="#22273a">
</head>
<body>
    <header class="app-header">
        <!-- DEBUG TOOLBAR -->
        <div id="debug-toolbar" class="debug-toolbar">
            <select id="debug-mode-select" aria-label="Modus w√§hlen">
                <option value="learn">Lernen</option>
                <option value="srs">√úben</option>
                <option value="free-pick">Free-Pick</option>
            </select>
            <select id="debug-force-type-select" aria-label="√úbungstyp erzwingen">
                <option value="">Typ erzwingen</option>
                <option value="choice">Multiple Choice</option>
                <option value="typing">L√ºcke</option>
                <option value="sentence">Satz</option>
                <option value="match">Match</option>
            </select>
            <label><input type="checkbox" id="debug-srs-toggle" checked> SRS</label>
            <button id="debug-srs-reset-box" class="debug-btn">Box 0</button>
            <button id="debug-srs-due-now" class="debug-btn">F√§llig</button>
            <input type="text" id="debug-seed-input" placeholder="Seed..." size="10" aria-label="RNG Seed">
            <label><input type="checkbox" id="debug-show-distractors"> Distraktoren</label>
            <button id="debug-db-reimport" class="debug-btn">DB Re-Import</button>
            <button id="debug-reload-json" class="debug-btn">JSON Reload</button>
        </div>
        
        <div class="settings-container">
            <button id="dark-mode-toggle" aria-label="Dark Mode umschalten">üåô</button>
        </div>
    </header>

    <main id="app-main" class="app-main">
        <!-- STATUS BAR (replaces gamification badges) -->
        <div id="status-bar" class="status-bar">
            Items: <span id="status-items">0</span> | 
            F√§llig: <span id="status-due">0</span> | 
            Seed: <span id="status-seed">-</span> | 
            SRS: <span id="status-srs">an</span>
        </div>

        <div id="exercise-container" class="exercise-container"></div>
        <div id="feedback-container" class="feedback-container"></div>
        
        <!-- FREE-PICK DIALOG -->
        <div id="free-pick-container" class="free-pick-container" style="display: none;">
            <h2>Freie Auswahl</h2>
            <div class="filters">
                <input type="text" id="free-pick-filter-text" placeholder="Text filtern..." aria-label="Text filtern">
                <select id="free-pick-filter-tag" aria-label="Tag filtern"><option value="">Tag...</option></select>
                <select id="free-pick-filter-type" aria-label="Typ filtern">
                    <option value="">Typ...</option>
                    <option value="choice">Choice</option>
                    <option value="typing">Typing</option>
                    <option value="sentence">Sentence</option>
                    <option value="match">Match</option>
                </select>
                <select id="free-pick-filter-difficulty" aria-label="Schwierigkeit filtern">
                    <option value="">Difficulty...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <ul id="free-pick-list" role="list"></ul>
        </div>
    </main>

    <footer id="app-footer" class="app-footer">
        <div class="button-group">
            <button id="check-btn" class="footer-btn">√úberpr√ºfen</button>
            <button id="repeat-item-btn" class="footer-btn-secondary" style="display: none;">Wiederholen</button>
            <button id="repeat-round-btn" class="footer-btn-secondary" style="display: none;">Runde erneut</button>
            <button id="random-next-btn" class="footer-btn-secondary" style="display: none;">N√§chstes zuf√§llig</button>
            <button id="free-pick-btn" class="footer-btn-secondary" style="display: none;">Free-Pick...</button>
        </div>
    </footer>

    <!-- ERROR OVERLAY -->
    <div id="error-overlay" class="error-overlay" style="display: none;">
        <div class="error-content">
            <h2>üêõ Unhandled Error</h2>
            <pre id="error-stack" class="error-stack"></pre>
            <h3>State Dump:</h3>
            <textarea id="error-state-dump" class="error-state-dump" readonly></textarea>
            <div class="error-buttons">
                <button id="error-copy-btn" class="error-btn">Copy to Clipboard</button>
                <button id="error-close-btn" class="error-btn">Close</button>
            </div>
        </div>
    </div>

    <script src="js/srs.js"></script>
    <script src="js/app.js"></script>
</body>
</html>